<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

  <button id="btn">测试箭头函数this</button>
  <button id="btn2">测试箭头函数this</button>

<script src="//cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
<script type="text/javascript">
  /*
  1. 箭头函数
    * 用来定义匿名函数
    * 基本语法:
      * 没有参数: () => console.log('xxxx')
      * 一个参数: i => i+2
      * 大于一个参数: (i,j) => i+j
      * 函数体不用大括号: 默认返回结果
      * 函数体如果有多个语句, 需要用{}包围
    * 使用场景:
      * 多用来定义回调函数
    * 好处:
      * 编码简洁
      * 函数体内的this使用的是外部的this
  2. 形参的默认值
    function Point(x = 1,y = 2) {
      this.x = x;
      this.y = y;
    }
  3. rest(可变)参数
    function add(...values) {
      let sum = 0;
      for(value of values) {
        sum += value;
      }
      return sum;
    }
  4. 扩展运算符(...)
    let arr1 = [1,3,5];
    let arr2 = [2,...arr1,6];
    arr2.push(...arr1);
  */

  //1. 箭头函数
  //使用'箭头'(=>)定义函数
  let fun = function (v) {
    return v + 3;
  }
  let fun2 = v => v + 3;
  console.log(fun2(3));


  let fun3 = (num1, num2) => num1 + num2;
  console.log(fun3(3, 5));


  [1, 3, 5].forEach(function (element) {
    console.log(element * element);
  });
  [1, 3, 5].forEach(element => console.log(element * element));

  // 注意: 函数体内的this使用的是外部的this
  $('#btn').click(() => {
    console.log(this);  //是window, 而不是btn
  })
  $('#btn2').click(function () {
    console.log(this); //是btn
  })

  //2. 形参的默认值
  function Point(x = 1, y = 2) {
    this.x = x;
    this.y = y;
  }

  let p = new Point(3, 4);
  console.log(p);
  p = new Point();
  console.log(p);

  //3. 可变参数
  function add(...values) {
    let sum = 0;
    for (value of values) {
      sum += value;
    }
    return sum;
  }
  console.log(add(2, 5, 4));

  //4. 扩展运算符
  let arr = [1, 3, 5];
  let arr2 = ['a', ...arr, 'c'];
  arr2.push(...arr);
  console.log(arr2);
</script>

</body>
</html>